<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>个人上传</title>
    <link rel="stylesheet" href="../layui/css/layui.css">
</head>
<body>
<input type="hidden" id="userId" th:value="${session.LOGIN_USER_ID}">
<script src="../layui/layui.js"></script>
<script src="../js/jquery-1.8.3.min.js"></script>
<div class="layui-table-inductionlist">
    <table class="layui-hide" id="myupfile" lay-filter="myupfile"></table>
</div>
<script>
    layui.use(['table', 'laypage', 'layer', 'laytpl'], function () {
        var table = layui.table,
            laypage = layui.laypage,
            laytpl = layui.laytpl,
            layer = layui.layer;
        var userId = $("#userId").val();
        var myUpFile = table.render({
            elem: '#myupfile',
            url: '../show/allupload.htmls?userId=' + userId,
            cols: [[
                {field: 'fileContent', title: '标题', event: 'setSign', width: 600}
                , {field: 'addFileTime', title: '上传时间', width: 600}
            ]]
            , page: true
            , height: 750,
            id: 'myupfile'
        });
        laypage.render({
            count: 10 //数据总数
            , jump: function (obj) {
                console.log(obj);
            }
        });
        table.on('tool( myUpFile)', function (obj) {
            var data = obj.data;
            console.log(data);
            if (obj.event === 'setSign') {
                layer.open({
                    type: 1,
                    title: '公告详情',
                    content: addindform,
                    area: ['600px', '4000px'],
                    formType: 2
                    , title: ' [' + data.at + '] '
                    , time: '[' + data.re + ']'
                    , content: '[' + data.content + ']'
                    , username: '[' + data.addUser + ']'
                }, function (value, index) {
                    layer.close(index);
                    //这里一般是发送修改的Ajax请求
                    //同步更新表格和缓存对应的值
                });
            }
        });
    });
</script>
</body>
</html>